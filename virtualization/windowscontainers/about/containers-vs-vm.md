---
title: コンテナーと仮想マシン
description: このトピックでは、コンテナーと仮想マシンの主な類似点と相違点について説明します。また、それぞれを使う場合についても説明します。 各コンテナーと仮想マシンはそれぞれの用途を持っています。実際には、コンテナーの多くの展開では、ハードウェア上で直接実行されるのではなく、仮想マシンをホストオペレーティングシステムとして使用します。特に、クラウドでコンテナーを実行している場合です。
keywords: docker、コンテナー、vm、仮想マシン
author: jasongerend
ms.author: jgerend
ms.date: 10/21/2019
ms.topic: article
ms.prod: windows-containers
ms.service: windows-containers
ms.openlocfilehash: 63150dfde007ec942446387064ad59f05b0aaa43
ms.sourcegitcommit: d0411b05d1ef7328a770766b84fd0743f9d9c237
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/23/2019
ms.locfileid: "10254409"
---
# <a name="containers-vs-virtual-machines"></a>コンテナーと仮想マシン

このトピックでは、コンテナーと仮想マシン (Vm) の主な類似点と相違点について説明します。また、それぞれを使用する必要がある場合は、次のようにします。 各コンテナーと Vm にはそれぞれの用途があります。実際には、コンテナーの多くの展開では、ハードウェアで直接実行するのではなく、ホストのオペレーティングシステムとして Vm を使います。特に、クラウドでコンテナーを実行している場合です。

コンテナーの概要については、「 [Windows とコンテナー](index.md)」を参照してください。

## <a name="container-architecture"></a>コンテナーのアーキテクチャ

コンテナーは、ホストオペレーティングシステム上でアプリケーションを実行するための、分離された簡易サイロです。 コンテナーは、次の図に示すように、ホストオペレーティングシステムのカーネルの上に構築されます (オペレーティングシステムの埋め込みとして考えることができます)。また、この図のように、ユーザーモードで実行するアプリと軽量なオペレーティングシステムの Api とサービスのみが含まれています。

![コンテナーがカーネル上でどのように動作するかを示すアーキテクチャ図](media/container-diagram.svg)

## <a name="virtual-machine-architecture"></a>仮想マシンのアーキテクチャ

コンテナーとは対照的に、Vm では、次の図に示すように、完全なオペレーティングシステムを実行します。これには、独自のカーネルが含まれます。

![Vm がホストオペレーティングシステムの横に完全なオペレーティングシステムを実行する方法を示すアーキテクチャ図](media/virtual-machine-diagram.svg)

## <a name="containers-vs-virtual-machines"></a>コンテナーと仮想マシン

次の表では、これらの補完的なテクノロジの類似点と相違点について説明します。

|                 | 仮想マシン  | コンテナー  |
| --------------  | ---------------- | ---------- |
| 隔離       | ホストオペレーティングシステムとその他の Vm から完全に分離されます。 これは、同じサーバーまたはクラスターの競合する企業からのアプリをホストするなど、強力なセキュリティ境界が重要な場合に役立ちます。 | 通常、ホストや他のコンテナーからの軽量な分離が提供されますが、セキュリティの境界が VM として強力となることはありません。 (軽量 VM の各コンテナーを分離するために、 [hyper-v 分離モード](../manage-containers/hyperv-container.md)を使用することでセキュリティを高めることができます)。 |
| オペレーティング システム | カーネルを含む完全なオペレーティングシステムを実行します。これにより、さらに多くのシステムリソース (CPU、メモリ、ストレージ) が必要になります。 | オペレーティングシステムのユーザーモード部分を実行します。また、システムリソースを少なくすることで、アプリに必要なサービスだけを含めるようにカスタマイズすることもできます。 |
| ゲストの互換性 | 仮想マシン内の任意のオペレーティングシステムに対してのみ実行されます。 | [ホストと同じオペレーティングシステムバージョン](../deploy-containers/version-compatibility.md)で実行されます (hyper-v 分離では、軽量の VM 環境で以前のバージョンの同じ OS を実行できます)。
| 展開     | Windows 管理センターまたは Hyper-v マネージャーを使用して個々の Vm を展開します。PowerShell または System Center Virtual Machine Manager を使用して複数の Vm を展開します。 | コマンドラインから Docker を使って個々のコンテナーを展開します。Azure Kubernetes Service などの orchestrator を使用して複数のコンテナーを展開します。 |
| オペレーティングシステムの更新とアップグレード | 各 VM にオペレーティングシステムの更新プログラムをダウンロードしてインストールします。 新しいオペレーティングシステムバージョンをインストールするには、アップグレードする必要があります。または、まったく新しい VM を作成するだけで済みます。 これには時間がかかることがあります。特に、多くの Vm をお持ちの場合は、 | コンテナー内のオペレーティングシステムファイルの更新またはアップグレードは同じです。 <br><ol><li>Windows の基本イメージの最新バージョンをポイントするように、コンテナーイメージのビルドファイル (Dockerfile とも呼ばれます) を編集します。 </li><li>この新しい基本イメージを使って、コンテナイメージを再構築します。</li><li>コンテナーのイメージをコンテナーレジストリにプッシュします。</li> <li>Orchestrator を使用して再展開します。<br>Orchestrator は、これをスケールで実現するための強力なオートメーションを提供します。 詳細については、「[チュートリアル: Azure Kubernetes Service でアプリケーションを更新する](https://docs.microsoft.com/azure/aks/tutorial-kubernetes-app-update)」を参照してください。</li></ol> |
| 常設ストレージ | 仮想ハードディスク (VHD) を使用して、単一の VM のローカルストレージ、または複数のサーバーで共有されている記憶域の SMB ファイル共有を使用する | 1つのノードのローカルストレージに Azure ディスクを使用するか、複数のノードまたはサーバーによって共有される記憶域の Azure Files (SMB 共有) を使用します。 |
| ロードバランシング | 仮想マシンの負荷分散は、実行中の Vm をフェールオーバークラスター内の他のサーバーに移行します。 | コンテナー自体は移動しません。代わりに、orchestrator は、読み込みと可用性の変化を管理するために、クラスターノード上のコンテナーを自動的に開始または停止することができます。 |
| フォールトトレランス | Vm は、新しいサーバー上で VM のオペレーティングシステムを再起動することで、クラスター内の別のサーバーにフェールオーバーできます。  | クラスターノードに障害が発生した場合、そのノードで実行されているコンテナーは、他のクラスターノードのオーケストレータによってすぐに再作成されます。 |
| ネットワーク     | 仮想ネットワークアダプターを使用します。 | 仮想ネットワークアダプターの分離ビューを使用して、わずかな仮想化を実現します。ホストのファイアウォールはコンテナーと共有されますが、リソースを節約できます。 詳細については、「 [Windows コンテナーネットワーク](../container-networking/architecture.md)」を参照してください。 |