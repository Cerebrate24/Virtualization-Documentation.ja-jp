---
title: コンテナーと仮想マシン
description: このトピックでは、コンテナーと仮想マシンの主な類似点と相違点と、それぞれの使用方法について説明します。 コンテナーと仮想マシンにはそれぞれ使用されます。実際には、コンテナーの多くの展開では、仮想マシンをハードウェア上で直接実行するのではなく、ホストオペレーティングシステムとして使用します (特にクラウドでコンテナーを実行する場合)。
keywords: docker、コンテナー、vm、仮想マシン
author: jasongerend
ms.author: jgerend
ms.date: 10/21/2019
ms.topic: article
ms.prod: windows-containers
ms.service: windows-containers
ms.openlocfilehash: 63150dfde007ec942446387064ad59f05b0aaa43
ms.sourcegitcommit: 1ca9d7562a877c47f227f1a8e6583cb024909749
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/04/2019
ms.locfileid: "74910822"
---
# <a name="containers-vs-virtual-machines"></a>コンテナーと仮想マシン

このトピックでは、コンテナーと仮想マシン (Vm) の主な類似点と相違点と、それぞれの使用方法について説明します。 コンテナーと Vm にはそれぞれ用途があります。実際、コンテナーの多くの展開では、特にクラウドでコンテナーを実行する場合に、ハードウェアで直接実行するのではなく、ホストオペレーティングシステムとして Vm を使用します。

コンテナーの概要については、「 [Windows とコンテナー](index.md)」を参照してください。

## <a name="container-architecture"></a>コンテナーのアーキテクチャ

コンテナーは、ホストオペレーティングシステムでアプリケーションを実行するための、分離された軽量のサイロです。 コンテナーは、この図に示すように、ホストオペレーティングシステムのカーネル (オペレーティングシステムの埋もれた組み込み機能と考えることができます) の上に構築され、アプリと、ユーザーモードで実行される簡易オペレーティングシステムの Api とサービスのみを含みます。

![コンテナーがカーネル上でどのように実行されるかを示すアーキテクチャ図](media/container-diagram.svg)

## <a name="virtual-machine-architecture"></a>仮想マシンのアーキテクチャ

コンテナーとは対照的に、Vm は、次の図に示すように、完全なオペレーティングシステム (独自のカーネルを含む) を実行します。

![ホストオペレーティングシステムの横で Vm が完全なオペレーティングシステムを実行する方法を示すアーキテクチャ図](media/virtual-machine-diagram.svg)

## <a name="containers-vs-virtual-machines"></a>コンテナーと仮想マシン

次の表は、これらの補完的なテクノロジの類似点と相違点を示しています。

|                 | 仮想マシン  | Container  |
| --------------  | ---------------- | ---------- |
| 分離性       | ホストオペレーティングシステムおよびその他の Vm からの完全な分離を提供します。 これは、同じサーバーまたはクラスター上の競合企業からのアプリのホスティングなど、強力なセキュリティ境界が重要な場合に便利です。 | は通常、ホストとその他のコンテナーから軽量な分離を提供しますが、VM として強力なセキュリティ境界としては提供しません。 (ライトウェイト VM 内の各コンテナーを分離する[hyper-v 分離モード](../manage-containers/hyperv-container.md)を使用すると、セキュリティを向上させることができます)。 |
| オペレーティング システム | カーネルを含む完全なオペレーティングシステムを実行して、より多くのシステムリソース (CPU、メモリ、およびストレージ) を必要とします。 | オペレーティングシステムのユーザーモード部分を実行し、アプリケーションに必要なサービスだけを含めるように調整できます。使用するシステムリソースが少なくて済みます。 |
| ゲストの互換性 | 仮想マシン内の任意のオペレーティングシステムについてのみ実行する | [ホストと同じバージョンのオペレーティングシステム](../deploy-containers/version-compatibility.md)で実行されます (hyper-v の分離では、ライトウェイト VM 環境で同じ os の以前のバージョンを実行できます)。
| 展開     | Windows 管理センターまたは Hyper-v マネージャーを使用して、個々の Vm を展開します。PowerShell または System Center Virtual Machine Manager を使用して複数の Vm をデプロイします。 | コマンドラインを使用して Docker を使用して個々のコンテナーをデプロイします。Azure Kubernetes Service などの orchestrator を使用して複数のコンテナーをデプロイします。 |
| オペレーティングシステムの更新プログラムとアップグレード | 各 VM にオペレーティングシステムの更新プログラムをダウンロードしてインストールします。 新しいオペレーティングシステムのバージョンをインストールするには、アップグレードを行うか、まったく新しい VM を作成するだけで済みます。 これには、特に Vm が多数ある場合に、時間がかかることがあります。 | コンテナー内のオペレーティングシステムファイルの更新またはアップグレードは同じです。 <br><ol><li>コンテナーイメージのビルドファイル (Dockerfile と呼ばれます) を編集して、最新バージョンの Windows ベースイメージを参照します。 </li><li>この新しい基本イメージを使用して、コンテナーイメージを再構築します。</li><li>コンテナーレジストリにコンテナーイメージをプッシュします。</li> <li>Orchestrator を使用して再デプロイします。<br>Orchestrator は、大規模な作業を行うための強力な自動化機能を提供します。 詳細については、「[チュートリアル: Azure Kubernetes Service でのアプリケーションの更新](https://docs.microsoft.com/azure/aks/tutorial-kubernetes-app-update)」を参照してください。</li></ol> |
| 永続ストレージ | 1つの VM に対してローカルストレージ用の仮想ハードディスク (VHD) を使用するか、複数のサーバーによって共有される記憶域の SMB ファイル共有を使用する | 1つのノードのローカルストレージには Azure ディスクを使用し、複数のノードまたはサーバーで共有するストレージには Azure Files (SMB 共有) を使用します。 |
| 負荷分散 | 仮想マシンの負荷分散は、実行中の Vm をフェールオーバークラスター内の他のサーバーに移動します。 | コンテナー自体は移動しません。代わりに、orchestrator はクラスターノード上のコンテナーを自動的に開始または停止して、負荷と可用性の変更を管理できます。 |
| フォールト トレランス | Vm は、新しいサーバーで VM のオペレーティングシステムを再起動することで、クラスター内の別のサーバーにフェールオーバーできます。  | クラスターノードで障害が発生した場合、そのノード上で実行されているすべてのコンテナーは、別のクラスターノードの orchestrator によって迅速に再作成されます。 |
| のネットワーク     | 仮想ネットワークアダプターを使用します。 | 仮想ネットワークアダプターの分離されたビューを使用し、若干の仮想化を提供します。ホストのファイアウォールはコンテナーと共有され、使用するリソースは少なくなります。 詳細については、「 [Windows コンテナーネットワーク](../container-networking/architecture.md)」を参照してください。 |