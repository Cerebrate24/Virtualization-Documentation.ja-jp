---
title: Windows 仮装マシンとのデバイスの共有
description: Hyper-V 仮想マシンとの間でデバイス (USB、オーディオ、マイク、マウントされたドライブ) を共有する手順を説明します
keywords: Windows 10, Hyper-V
ms.author: scooley
ms.date: 10/20/2017
ms.topic: article
ms.prod: windows-10-hyperv
ms.service: windows-10-hyperv
ms.assetid: d1aeb9cb-b18f-43cb-a568-46b33346a188
ms.openlocfilehash: 52d51fca03f454a311a123f20e5aeda9376fdc3d
ms.sourcegitcommit: 1ca9d7562a877c47f227f1a8e6583cb024909749
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/04/2019
ms.locfileid: "74911072"
---
# <a name="share-devices-with-your-virtual-machine"></a>仮想マシンとのデバイスの共有

> ここで説明する手順は、Windows 仮想マシンでのみ使用できます。

拡張セッション モードを有効にすると、RDP (リモート デスクトップ プロトコル) を使って Hyper-V を仮想マシンに接続できます。  これにより仮想マシンの全般的な表示エクスペリエンスが向上するだけでなく、RDP 経由の接続によって、仮想マシンがコンピューターとの間でデバイスを共有できます。  RDP は Windows 10 で既定でオンであるため、ほとんどの場合、Windows マシンから Windows 仮想マシンへの接続には、既に RDP が使用されています。  この記事では、接続の設定ダイアログのメリットと非表示のオプションを中心に説明します。

RDP/拡張セッション モードには、次の機能があります。

* 仮想マシンがサイズ変更可能になり、高 DPI に対応します。
* 仮想マシンがさらに緊密に連携します。
  * クリップボードの共有
  * ドラッグ アンド ドロップやコピーと貼り付けによるファイルの共有
* デバイスを共有できます。
  * マイクとスピーカー
  * USB デバイス
  * データ ディスク
  * プリンター

この記事では、セッションの種類の表示方法、拡張セッション モードへの切り替え方法、セッション設定の構成方法を示します。

## <a name="share-drives-and-devices"></a>ドライブとデバイスの共有

拡張セッション モードのデバイス共有機能は、仮想マシンへの接続時に表示されるこの目立たない接続ウィンドウ内に、非表示の状態で含まれています。

![](media/esm-default-view.png)

既定では、拡張セッション モードを使用している仮想マシンは、クリップボードとプリンターを共有します。  またこれらの仮想マシンは、既定でオーディオを仮想マシンからコンピューターのスピーカーに戻すように構成されています。

デバイスを仮想マシンと共有したり、仮想マシンの既定の設定値を変更したりするには、次の手順に従います。

1. その他のオプションを表示します。

  ![](media/esm-show-options.png)

1. ローカル リソースが表示されます

  ![](media/esm-local-resources.png)

### <a name="share-storage-and-usb-devices"></a>ストレージと USB デバイスの共有

既定では、拡張セッション モードを使用している仮想マシンでは、プリンターとクリップボードが共有されているほか、スマート カードやその他のセキュリティ デバイスが仮装マシンにパススルーされるため、ユーザーは仮想マシンで安全性の高いログイン ツールを使用できます。

それ以外のデバイス (USB デバイスや C: ドライブ など) を共有するには、[その他] メニューを選択します。  
![](media/esm-more-devices.png)

表示された画面で、仮想マシンと共有するデバイスを選択します。  特にシステム ドライブ (Windows C: ドライブ) は、ファイルの共有に便利です。  
![](media/esm-drives-usb.png)

### <a name="share-audio-devices-speakers-and-microphones"></a>オーディオ デバイスの共有 (スピーカーとマイク)

既定では、拡張セッション モードを使用している仮想マシンにオーディオがパススルーされるため、ユーザーは仮想マシンでオーディオを出力できます。  仮想マシンでは、ホスト コンピューターで現在選択されているオーディオ デバイスが使用されます。

これらの設定を変更したり、マイクのパススルーを追加して、仮想マシンでオーディオ録音を可能にしたりするには、次の手順に従います。

リモート オーディオの設定を構成するには、[設定] メニューを選択します。  
![](media/esm-audio.png)

オーディオとマイクの設定を構成します。  
![](media/esm-audio-settings.png)

仮想マシンはおそらくローカルで実行されているため、[このコンピューターで再生する] と [リモート コンピュータで再生] の 2 つのオプションは、どちらを選んでも同じ結果になります。

## <a name="re-launching-the-connection-settings"></a>接続設定の再起動

解像度とデバイス共有のダイアログ ボックスが表示されない場合は、Windows メニューまたはコマンド ラインから管理者として VMConnect を個別に起動してみます。  

``` Powershell
vmconnect.exe
```

## <a name="check-session-type"></a>セッションの種類の確認

現在の接続の種類を確認するには、仮想マシン接続ツール (VMConnect) の上部にある拡張セッション モードのアイコンを使用します。  このボタンはまた、基本セッションと拡張セッション モードの切り替えにも使用できます。

![](media/esm-button-location.png)

| icon | 接続状態 |
|:-----|:---------|
|![](media/esm-basic.png)| 現在、拡張セッション モードで実行しています。  このアイコンをクリックすると、仮想マシンが基本モードで再接続されます。 |
|![](media/esm-connect.png)| 現在、基本セッション モードで実行していますが、拡張セッション モードが利用可能です。  このアイコンをクリックすると、仮想マシンが拡張セッション モードで再接続されます。  |
|![](media/esm-stop.png)| 現在、基本モードで実行しています。  この仮想マシンでは、拡張セッション モードは使用できません。 |